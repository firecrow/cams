fixed scary bug from refactor :(