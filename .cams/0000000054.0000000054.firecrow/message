more better working diff, and other updates