sketching out new core function for tree